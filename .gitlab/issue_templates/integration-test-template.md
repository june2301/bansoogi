# 🧪 ~~~ 시나리오 테스트 구현

<!-- 아래 항목들은 모두 예시입니다. -->

## 어떤 계층 테스트인가요?
- [ ] Controller
- [x] Service
- [ ] Repository

## 🏆 테스트 목적
- 다중 이체 요청 시의 동시성 제어 검증
- 데이터 정합성 및 Race Condition 방지 확인  
- 락(Lock) 메커니즘의 정상 동작 검증

## 📌 테스트 범위
- 동시 다발적 이체 요청 처리
- 계좌 잔액의 정합성 유지
- 동시성 제어 메커니즘 (Pessimistic Lock)
- 트랜잭션 격리 수준 검증

## 📝 테스트 시나리오

### 다중 이체 테스트
- [ ] 다수 계좌에서 단일 계좌로 동시 이체 (B,C,D → A)
- [ ] 단일 계좌에서 다수 계좌로 동시 이체 (A → B,C,D) 
- [ ] 동일 금액의 반복 이체 요청 처리

### 순환 이체 테스트  
- [ ] 순차적 순환 이체 (A → B → C → A)
- [ ] 동시 순환 이체 요청 처리
- [ ] 데드락 방지 검증

### 경합 상황 테스트
- [ ] 동일 계좌 간 양방향 동시 이체 (A ↔ B)
- [ ] 잔액 부족 상황에서의 동시 이체
- [ ] 락 타임아웃 상황 처리

## ✅ 완료 조건
- [ ] given-when-then 형식으로 코드 작성
- [ ] 테스트 설명을 위한 @DisplayName 추가

## 🛠 테스트 환경
- CountDownLatch (동시 요청 제어)
- ExecutorService (다중 스레드 실행)
- @Transactional 테스트
- AssertJ + Awaitility (비동기 검증)
- MySQL 테스트용 데이터베이스 생성
